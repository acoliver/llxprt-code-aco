# 2025 Q4 Release Notes

<!-- @plan:PLAN-20251018-STATELESSPROVIDER2.P20 @requirement:REQ-SP2-005 -->

LLxprt Code 0.5.1 delivers the second phase of the stateless provider refactor, focusing on runtime-scoped authentication, CLI runtime isolation, and documentation updates that prepare partners for the migration.

## Highlights

- Runtime-specific credential caches keyed by provider, profile, and runtime id prevent subagents from sharing tokens with the main CLI.
- CLI runtime helpers gained explicit OAuth manager management, runtime scopes, and nested activation support.
- Architecture, settings, CLI, core runtime, and migration documents were promoted from stubs to full guidance aligned with PLAN-20251018-STATELESSPROVIDER2.

## Provider runtime changes

- `ProviderRuntimeContext.metadata` now exposes a `runtimeAuthScope` snapshot populated by the auth precedence resolver. Providers should propagate it to telemetry and audit logs.
- Scoped caches subscribe to `SettingsService` events to revoke tokens when `/provider`, `/profile load`, or `/set` commands alter credentials.
- The CLI registry tracks `ProviderManager`, `SettingsService`, and `OAuthManager` instances per runtime id. Calling `resetCliProviderInfrastructure()` tears down cached managers and revokes scoped tokens.

## CLI and tooling

- Added `activateIsolatedRuntimeContext()` to wrap subagent work with runtime metadata, guaranteeing nested contexts inherit correct auth scopes.
- `getCliOAuthManager()` exposes the runtime-bound OAuth manager so extensions can probe authentication status without leaking across contexts.
- `/diagnostics` now includes runtime scope metadata, enabling easier debugging of isolated runs.

## Migration and verification

- Developers should follow the [Stateless Provider v2 migration guide](../migration/stateless-provider-v2.md) to update custom providers and automation workflows.
- Recommended verification commands:
  ```bash
  npm run lint
  npm run test -- --run provider-multi-runtime
  ```

For historical context refer to `docs/release-notes/stateless-provider.md`, which covers the original stateless provider rollout.
