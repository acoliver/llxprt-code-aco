
 RUN  v3.2.4 /Users/acoliver/projects/llxprt-code

stdout | packages/core/src/core/subagent.test.ts > subagent.ts > SubAgentScope > runNonInteractive - Initialization and Prompting > should include output instructions in the system prompt when outputs are defined
You have stopped calling tools but have not emitted the following required variables: result1. Please use the 'self.emitvalue' tool to emit them now, or continue working if necessary.

stdout | packages/core/src/core/subagent.test.ts > subagent.ts > SubAgentScope > runNonInteractive - Initialization and Prompting > should include output instructions in the system prompt when outputs are defined
You have stopped calling tools but have not emitted the following required variables: result1. Please use the 'self.emitvalue' tool to emit them now, or continue working if necessary.

stdout | packages/core/src/core/subagent.test.ts > subagent.ts > SubAgentScope > runNonInteractive - Initialization and Prompting > should include output instructions in the system prompt when outputs are defined
You have stopped calling tools but have not emitted the following required variables: result1. Please use the 'self.emitvalue' tool to emit them now, or continue working if necessary.

stdout | packages/core/src/core/subagent.test.ts > subagent.ts > SubAgentScope > runNonInteractive - Initialization and Prompting > should include output instructions in the system prompt when outputs are defined
You have stopped calling tools but have not emitted the following required variables: result1. Please use the 'self.emitvalue' tool to emit them now, or continue working if necessary.

stdout | packages/core/src/core/subagent.test.ts > subagent.ts > SubAgentScope > runNonInteractive - Initialization and Prompting > should include output instructions in the system prompt when outputs are defined
You have stopped calling tools but have not emitted the following required variables: result1. Please use the 'self.emitvalue' tool to emit them now, or continue working if necessary.

stdout | packages/core/src/core/subagent.test.ts > subagent.ts > SubAgentScope > runNonInteractive - Initialization and Prompting > should include output instructions in the system prompt when outputs are defined
You have stopped calling tools but have not emitted the following required variables: result1. Please use the 'self.emitvalue' tool to emit them now, or continue working if necessary.

stdout | packages/core/src/core/subagent.test.ts > subagent.ts > SubAgentScope > runNonInteractive - Initialization and Prompting > should include output instructions in the system prompt when outputs are defined
You have stopped calling tools but have not emitted the following required variables: result1. Please use the 'self.emitvalue' tool to emit them now, or continue working if necessary.

stdout | packages/core/src/core/subagent.test.ts > subagent.ts > SubAgentScope > runNonInteractive - Initialization and Prompting > should include output instructions in the system prompt when outputs are defined
You have stopped calling tools but have not emitted the following required variables: result1. Please use the 'self.emitvalue' tool to emit them now, or continue working if necessary.

stdout | packages/core/src/core/subagent.test.ts > subagent.ts > SubAgentScope > runNonInteractive - Initialization and Prompting > should include output instructions in the system prompt when outputs are defined
You have stopped calling tools but have not emitted the following required variables: result1. Please use the 'self.emitvalue' tool to emit them now, or continue working if necessary.

stdout | packages/core/src/core/subagent.test.ts > subagent.ts > SubAgentScope > runNonInteractive - Initialization and Prompting > should include output instructions in the system prompt when outputs are defined
You have stopped calling tools but have not emitted the following required variables: result1. Please use the 'self.emitvalue' tool to emit them now, or continue working if necessary.

stderr | packages/core/src/core/subagent.test.ts > subagent.ts > SubAgentScope > runNonInteractive - Execution and Tool Use > should provide specific tool error responses to the model
Error executing tool failing_tool: Tool failed catastrophically

stdout | packages/core/src/core/subagent.test.ts > subagent.ts > SubAgentScope > runNonInteractive - Execution and Tool Use > should nudge the model if it stops before emitting all required variables
You have stopped calling tools but have not emitted the following required variables: required_var. Please use the 'self.emitvalue' tool to emit them now, or continue working if necessary.

stderr | packages/core/src/core/subagent.test.ts > subagent.ts > SubAgentScope > runNonInteractive - Termination and Recovery > should terminate with ERROR if the model call throws
Error during subagent execution: Error: API Failure
    at [90m/Users/acoliver/projects/llxprt-code/[39mpackages/core/src/core/subagent.test.ts:871:49
    at [90mfile:///Users/acoliver/projects/llxprt-code/[39mnode_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:752:20

 âœ“ packages/core/src/core/subagent.test.ts (20 tests) 311ms

 Test Files  1 passed (1)
      Tests  20 passed (20)
   Start at  12:53:32
   Duration  1.64s (transform 606ms, setup 0ms, collect 1.11s, tests 311ms, environment 0ms, prepare 48ms)

