<!-- @plan:PLAN-20251018-STATELESSPROVIDER2.P17 @requirement:REQ-SP2-004 -->
Phase PLAN-20251018-STATELESSPROVIDER2.P17 completed at 2025-10-20T05:54:26Z (UTC).

Files Modified:
- packages/core/src/auth/__tests__/authRuntimeScope.test.ts
- packages/cli/test/auth/authRuntimeScope.test.ts
- project-plans/20251018statelessprovider2/analysis/pseudocode/auth-runtime-scope.md
- project-plans/20251018statelessprovider2/reports/P17-worker.md

Command: grep -r "@plan:PLAN-20251018-STATELESSPROVIDER2.P17" packages/core/src/auth/__tests__/authRuntimeScope.test.ts packages/cli/test/auth/authRuntimeScope.test.ts
Output:
packages/core/src/auth/__tests__/authRuntimeScope.test.ts:  it('isolates cached token per runtime @plan:PLAN-20251018-STATELESSPROVIDER2.P17 @requirement:REQ-SP2-004 @pseudocode auth-runtime-scope.md lines 1-3', async () => {
packages/core/src/auth/__tests__/authRuntimeScope.test.ts:  it('annotates OAuth acquisition with runtime scope metadata @plan:PLAN-20251018-STATELESSPROVIDER2.P17 @requirement:REQ-SP2-004 @pseudocode auth-runtime-scope.md lines 3-4', async () => {
packages/core/src/auth/__tests__/authRuntimeScope.test.ts:  it('registers scoped invalidation hooks on runtime metadata @plan:PLAN-20251018-STATELESSPROVIDER2.P17 @requirement:REQ-SP2-004 @pseudocode auth-runtime-scope.md lines 4-7', async () => {
packages/cli/test/auth/authRuntimeScope.test.ts:  it('scopes cached token per CLI runtime @plan:PLAN-20251018-STATELESSPROVIDER2.P17 @requirement:REQ-SP2-004 @pseudocode auth-runtime-scope.md lines 1-3', async () => {
packages/cli/test/auth/authRuntimeScope.test.ts:  it('annotates CLI OAuth path with runtime scope metadata @plan:PLAN-20251018-STATELESSPROVIDER2.P17 @requirement:REQ-SP2-004 @pseudocode auth-runtime-scope.md lines 3-4', async () => {
packages/cli/test/auth/authRuntimeScope.test.ts:  it('wires CLI runtime cleanup to scoped credential revocation @plan:PLAN-20251018-STATELESSPROVIDER2.P17 @requirement:REQ-SP2-004 @pseudocode auth-runtime-scope.md lines 5-7', async () => {

Command: npm test -- --run authRuntimeScope
Output:
> @vybestack/llxprt-code@0.5.0 test
> npm run test --workspaces --if-present -- --run authRuntimeScope

> @vybestack/llxprt-code-a2a-server@0.4.2 test
> vitest run --run authRuntimeScope

No test files found, exiting with code 0

> @vybestack/llxprt-code@0.5.0 test
> vitest run --run authRuntimeScope

FAIL  packages/cli/test/auth/authRuntimeScope.test.ts > CLI auth runtime scope gaps > scopes cached token per CLI runtime …  
AssertionError: expected null to be 'cli-runtime-token'

FAIL  packages/cli/test/auth/authRuntimeScope.test.ts > CLI auth runtime scope gaps > annotates CLI OAuth path with runtime scope metadata …

FAIL  packages/cli/test/auth/authRuntimeScope.test.ts > CLI auth runtime scope gaps > wires CLI runtime cleanup to scoped credential revocation …

FAIL  packages/core/src/auth/__tests__/authRuntimeScope.test.ts > auth runtime scope gaps > isolates cached token per runtime …
AssertionError: expected null to be 'scoped-token-runtime-a'

FAIL  packages/core/src/auth/__tests__/authRuntimeScope.test.ts > auth runtime scope gaps > annotates OAuth acquisition with runtime scope metadata …

FAIL  packages/core/src/auth/__tests__/authRuntimeScope.test.ts > auth runtime scope gaps > registers scoped invalidation hooks on runtime metadata …

Status: failing as expected (runtime-scoped auth caching not yet implemented).
